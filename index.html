<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assistert Selvhjelp - Profesjonell Demo</title>
    <style>
        /* DESIGN: F친r det til 친 se ut som en ordentlig helse-nettside */
        body { 
            font-family: 'Segoe UI', 'Helvetica Neue', Arial, sans-serif; 
            margin: 0; 
            background-color: #f0f2f5; 
            color: #1a1a1a; 
            line-height: 1.6;
        }

        /* Header / Navigasjon */
        header {
            background-color: #ffffff;
            border-bottom: 1px solid #e1e4e8;
            padding: 15px 10%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.02);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .logo { 
            font-weight: 700; 
            font-size: 1.4em; 
            color: #0056b3; 
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Spr친kvelger dropdown */
        .language-selector select { 
            padding: 10px 15px; 
            border-radius: 6px; 
            border: 1px solid #ced4da; 
            font-size: 14px; 
            background-color: #f8f9fa;
            cursor: pointer;
            transition: all 0.2s;
        }
        .language-selector select:hover { border-color: #0056b3; }

        /* Hovedinnhold */
        main {
            max-width: 800px;
            margin: 40px auto;
            background: white;
            padding: 60px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
        }

        /* Typografi for artikkelen */
        h1 { color: #2c3e50; margin-bottom: 30px; font-size: 2.5em;}
        h2 { color: #0056b3; margin-top: 40px; margin-bottom: 20px; font-size: 1.5em; }
        
        p { margin-bottom: 20px; font-size: 1.1em; color: #444; }
        
        ul { margin-bottom: 20px; padding-left: 20px; }
        li { margin-bottom: 10px; font-size: 1.1em; color: #444; }

        .quote {
            font-style: italic;
            border-left: 4px solid #0056b3;
            padding-left: 20px;
            margin: 30px 0;
            color: #555;
            background: #f9fbfd;
            padding: 20px;
            border-radius: 0 8px 8px 0;
        }

        /* Laste-animasjon */
        .loading-overlay {
            opacity: 0.5;
            pointer-events: none;
            cursor: wait;
        }
        #status-text { 
            font-size: 0.9em; 
            font-weight: bold; 
            color: #0056b3; 
            margin-right: 15px; 
            display: none; 
        }

    </style>
</head>
<body>

    <header>
        <div class="logo">Assistert Selvhjelp</div>
        
        <div class="language-selector">
            <span id="status-text">Oversetter...</span>
            <select id="langSelect" onchange="changeLanguage()">
                <option value="NO">游游 Norsk (Original)</option>
                <option value="EN-GB">游섫릖 Engelsk</option>
                <option value="PL">游왫릖 Polsk</option>
                <option value="DE">游뾇릖 Tysk</option>
                <option value="ES">游쀯릖 Spansk</option>
                <option value="UA">游쥟릖 Ukrainsk</option>
            </select>
        </div>
    </header>

    <main id="content-area">
        
        <h1 class="translate">Hva er depresjon?</h1>
        
        <p class="translate">
            Det er helt normalt 친 f칮le seg nedfor, trist eller deppa innimellom, og sorg er en naturlig reaksjon n친r vi mister noe eller noen som betyr mye for oss. Depresjon er ikke det samme som 친 f칮le seg nedfor.
        </p>

        <p class="translate">
            Depresjon er en psykisk lidelse som p친virker hva du f칮ler, tenker og gj칮r over en lang periode. Det er en tilstand preget av nedstemthet, lav selvf칮lelse og mindre interesse for aktiviteter som tidligere gav glede.
        </p>

        <div class="quote translate">
            "칀 bli bedre fra depresjon krever varig forpliktelse. Jeg har tatt p친 meg den forpliktelsen for mitt eget livs skyld."
        </div>

        <h2 class="translate">Vanlige symptomer</h2>
        
        <p class="translate">Her er noen tegn du b칮r se etter:</p>
        
        <ul>
            <li class="translate">Redusert selvf칮lelse og selvtillit</li>
            <li class="translate">Skyldf칮lelse og mindreverdighetsf칮lelse</li>
            <li class="translate">Problemer med konsentrasjon og oppmerksomhet</li>
            <li class="translate">S칮vnforstyrrelser (for mye eller for lite s칮vn)</li>
            <li class="translate">F칮lelse av "l친st" kropp som gj칮r bevegelse vanskelig</li>
        </ul>

        <p class="translate">
            Symptomene p친 depresjon skaper onde sirkler. De bidrar ofte til isolasjon og nedsatt aktivitetsniv친, hvor man slutter 친 gj칮re ting som tidligere ga glede, mening og mestring.
        </p>

    </main>

    <input type="hidden" id="apiKey" value="83dcebb3-5c3e-4843-9124-1c4d05f002c8:fx">

    <script>
        // Vi lagrer originalteksten i minnet ved oppstart
        // Dette gj칮r at vi kan bytte tilbake til norsk umiddelbart uten API-kall
        const elementsToTranslate = document.querySelectorAll('.translate');
        const originalTexts = [];
        
        elementsToTranslate.forEach((el, index) => {
            el.dataset.id = index; // Gi hver bit en ID
            originalTexts[index] = el.innerText; // Lagre original norsk tekst
        });

        async function changeLanguage() {
            const lang = document.getElementById('langSelect').value;
            const apiKey = document.getElementById('apiKey').value;
            const container = document.getElementById('content-area');
            const status = document.getElementById('status-text');

            // 1. Hvis norsk velges, hent fra minnet (gratis og lynraskt)
            if (lang === 'NO') {
                elementsToTranslate.forEach((el, index) => {
                    el.innerText = originalTexts[index];
                });
                return;
            }

            // 2. Vis laste-status
            status.style.display = 'inline';
            status.innerText = 'Oversetter siden...';
            container.classList.add('loading-overlay');

            try {
                // Vi samler all tekst i 칠n bolk for 친 sende f칝rre foresp칮rsler til APIet (raskere)
                // Vi bruker "___" som skille, slik at DeepL oversetter alt, men vi kan dele det opp igjen etterp친.
                const separator = "\n___\n"; 
                const textBlock = Array.from(elementsToTranslate).map(el => el.innerText).join(separator);

                // Send til API
                const translatedBlock = await callDeepL(textBlock, lang, apiKey);

                // Del opp svaret igjen
                const translatedSegments = translatedBlock.split(separator.trim()); // Trim fjerner ekstra mellomrom

                // Oppdater nettsiden med den nye teksten
                elementsToTranslate.forEach((el, index) => {
                    if (translatedSegments[index]) {
                        el.innerText = translatedSegments[index].replace(/___/g, '').trim(); // Rens eventuelle rester
                    }
                });

            } catch (error) {
                console.error(error);
                alert("Noe gikk galt med oversettelsen.");
            } finally {
                // Skru av laste-modus
                container.classList.remove('loading-overlay');
                status.style.display = 'none';
            }
        }

        async function callDeepL(text, targetLang, key) {
            const deepLUrl = "https://api-free.deepl.com/v2/translate";
            // Proxy fiks for localhost testing
            const proxyUrl = "https://corsproxy.io/?" + encodeURIComponent(deepLUrl);

            const params = new URLSearchParams();
            params.append('auth_key', key);
            params.append('text', text);
            params.append('target_lang', targetLang); 

            const response = await fetch(proxyUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                body: params
            });

            if (!response.ok) throw new Error("API Feil");
            
            const data = await response.json();
            return data.translations[0].text;
        }
    </script>
</body>
</html>
